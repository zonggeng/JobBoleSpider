{"title": "使用 Vi/Vim 编辑器：基础篇", "url": "http://blog.jobbole.com/113649/", "fron_image_url": ["http://jbcdn2.b0.upaiyun.com/2012/04/vim-logo.png"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 0, "tags": "IT技术,Linux,Vim", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://linuxtechlab.com/working-vi-editor-basics/\">LinuxTechLab</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9323-1.html\">Linux中国/Fan Li</a>   </div><p>VI 编辑器是一个基于命令行的、功能强大的文本编辑器，最早为 Unix 系统开发，后来也被移植到许多的 Unix 和 Linux 发行版上。</p>\n<p>在 Linux 上还存在着另一个 VI 编辑器的高阶版本 —— VIM（也被称作 VI IMproved）。VIM 只是在 VI 已经很强的功能上添加了更多的功能，这些功能有：</p>\n<ul>\n<li>支持更多 Linux 发行版，</li>\n<li>支持多种编程语言，包括 python、c++、perl 等语言的代码块折叠，语法高亮，</li>\n<li>支持通过多种网络协议，包括 http、ssh 等编辑文件，</li>\n<li>支持编辑压缩归档中的文件，</li>\n<li>支持分屏同时编辑多个文件。</li>\n</ul>\n<p>接下来我们会讨论 VI/VIM 的命令以及选项。本文出于教学的目的，我们使用 VI 来举例，但所有的命令都可以被用于 VIM。首先我们先介绍 VI 编辑器的两种模式。</p>\n<h3 id=\"toc_1\">命令模式</h3>\n<p>命令模式下，我们可以执行保存文件、在 VI 内运行命令、复制/剪切/粘贴操作，以及查找/替换等任务。当我们处于插入模式时，我们可以按下 <code>Escape</code>（<code>Esc</code>）键返回命令模式</p>\n<h3 id=\"toc_2\">插入模式</h3>\n<p>在插入模式下，我们可以键入文件内容。在命令模式下按下 <code>i</code> 进入插入模式。</p>\n<h3 id=\"toc_3\">创建文件</h3>\n<p>我们可以通过下述命令建立一个文件（LCTT 译注：如果该文件存在，则编辑已有文件）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc8c56b2f7726984590\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ vi filename\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc8c56b2f7726984590-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc8c56b2f7726984590-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc8c56b2f7726984590-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">vi </span><span class=\"crayon-i\">filename</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc8c56b2f7726984590-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>一旦该文件被创建或者打开，我们首先进入命令模式，我们需要进入输入模式以在文件中输入内容。我们通过前文已经大致上了解这两种模式。</p>\n<h3 id=\"toc_4\">退出 Vi</h3>\n<p>如果是想从插入模式中退出，我们首先需要按下 <code>Esc</code> 键进入命令模式。接下来我们可以根据不同的需要分别使用两种命令退出 Vi。</p>\n<ol>\n<li>不保存退出 – 在命令模式中输入 <code>:q!</code></li>\n<li>保存并退出 – 在命令模式中输入 <code>:wq</code></li>\n</ol>\n<h3 id=\"toc_5\">移动光标</h3>\n<p>下面我们来讨论下那些在命令模式中移动光标的命令和选项：</p>\n<ol>\n<li><code>k</code> 将光标上移一行</li>\n<li><code>j</code> 将光标下移一行</li>\n<li><code>h</code> 将光标左移一个字母</li>\n<li><code>i</code> 将光标右移一个字母注意：如果你想通过一个命令上移或下移多行，或者左移、右移多个字母，你可以使用 <code>4k</code> 或者 <code>5j</code>，这两条命令会分别上移 4 行或者右移 5 个字母。</li>\n<li><code>0</code> 将光标移动到该行行首</li>\n<li><code>$</code> 将光标移动到该行行尾</li>\n<li><code>nG</code> 将光标移动到第 n 行</li>\n<li><code>G</code> 将光标移动到文件的最后一行</li>\n<li><code>{</code> 将光标移动到上一段</li>\n<li><code>}</code> 将光标移动到下一段</li>\n</ol>\n<p>除此之外还有一些命令可以用于控制光标的移动，但上述列出的这些命令应该就能应付日常工作所需。</p>\n<h3 id=\"toc_6\">编辑文本</h3>\n<p>这部分会列出一些用于命令模式的命令，可以进入插入模式来编辑当前文件</p>\n<ol>\n<li><code>i</code> 在光标所在行的行首插入内容</li>\n<li><code>I</code> 在光标所在行的行尾插入内容</li>\n<li><code>a</code> 在当前光标之前插入内容</li>\n<li><code>A</code> 在当前光标之后插入内容</li>\n<li><code>o</code> 在当前光标所在行之前添加一行</li>\n<li><code>O</code> 在当前光标所在行之后添加一行</li>\n</ol>\n<h3 id=\"toc_7\">删除文本</h3>\n<p>以下的这些命令都只能在命令模式下使用，所以首先需要按下 <code>Esc</code> 进入命令模式，如果你正处于插入模式：</p>\n<ol>\n<li><code>dd</code> 删除光标所在的整行内容，可以在 <code>dd</code> 前增加数字，比如 <code>2dd</code> 可以删除从光标所在行开始的两行</li>\n<li><code>d$</code> 删除从光标所在行开始的所有行</li>\n<li><code>d^</code> 删除从文件开始直到光标所在行的所有行 4 <code>dw</code> 删除从光标所在位置直到下一个词开始的所有内容</li>\n</ol>\n<h3 id=\"toc_8\">复制与黏贴</h3>\n<ol>\n<li><code>yy</code> 复制当前行，在 <code>yy</code> 前添加数字可以复制多行</li>\n<li><code>p</code> 在光标之后粘贴复制行</li>\n<li><code>P</code> 在光标之前粘贴复制行</li>\n</ol>\n<p>上述就是可以在 VI/VIM 编辑器上使用的一些基本命令。在未来的教程中还会继续教授一些更高级的命令。如果有任何疑问和建议，请在下方评论区留言。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113649\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113649votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113649\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "url_object_id": "621a42384d7a6a4c0b2d3a892c42abe8", "front_image_path": "full/4c6abd763d27eeeb4c7e7665f213388ec74df623.jpg"}
{"title": "Nginx 教程（2）：性能", "url": "http://blog.jobbole.com/113572/", "fron_image_url": ["http://jbcdn2.b0.upaiyun.com/2013/07/Nginx-Logo.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": "6", "tags": "IT技术,Nginx,Web", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.netguru.co/codestories/nginx-tutorial-performance\">netguru</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/nginx-tutorial-performance\">开源中国</a>   </div><p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/01/52dfd28844c7c6a190eecae956856438.jpg\"></p>\n<p>大家好，分享即关爱，我们很乐意和你分享一些新的知识，我们准备了一个 Nginx 的教程，分为三个系列，如果你对 Nginx 有所耳闻，或者想增进 Nginx 方面的经验和理解，那么恭喜你来对地方了。</p>\n<p>我们会告诉你 Nginx 如何工作及其背后的理念，还有如何优化以加快应用的性能，如何安装启动和保持运行。</p>\n<p>这个教程有三个部分：</p>\n<ul>\n<li>基本概念 —— 这部分需要去了解 Nginx 的一些指令和使用场景，继承模型，以及 Nginx 如何选择 server 块，location 的顺序。</li>\n<li>性能 —— 介绍改善 Nginx 速度的方法和技巧，我们会在这里谈及 gzip 压缩，缓存，buffer 和超时。</li>\n<li>SSL 安装 —— 如何配置服务器使用 HTTPS</li>\n</ul>\n<p>创建这个系列，我们希望，一是作为参考书，可以通过快速查找到相关问题（比如 gzip 压缩，SSL 等）的解决方式，也可以直接通读全文。为了获得更好的学习效果，我们建议你在本机安装 Nginx 并且尝试进行实践。</p>\n<h2><code>tcp_nodelay</code>, <code>tcp_nopush</code> 和 <code>sendfile</code></h2>\n<h3><code>tcp_nodelay</code></h3>\n<p>在 TCP 发展早期，工程师需要面对流量冲突和堵塞的问题，其中涌现了大批的解决方案，其中之一是由 John Nagle 提出的算法。</p>\n<p>Nagle 的算法旨在防止通讯被大量的小包淹没。该理论不涉及全尺寸 tcp 包（最大报文长度，简称 MSS）的处理。只针对比 MSS 小的包，只有当接收方成功地将以前的包(ACK)的所有确认发送回来时，这些包才会被发送。在等待期间，发送方可以缓冲更多的数据之后再发送。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc615364c2527554078\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nif package.size &gt;= MSS.size\r\n  send(package)\r\nelsif acks.all_received?\r\n  send(package)\r\nelse\r\n  # acumulate data\r\nend</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364c2527554078-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364c2527554078-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364c2527554078-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364c2527554078-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364c2527554078-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364c2527554078-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364c2527554078-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc615364c2527554078-1\"><span class=\"crayon-st\">if</span> <span class=\"crayon-t\">package</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">size</span> <span class=\"crayon-o\">&gt;=</span> <span class=\"crayon-v\">MSS</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">size</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364c2527554078-2\">  <span class=\"crayon-e\">send</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">package</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364c2527554078-3\"><span class=\"crayon-i\">elsif</span> <span class=\"crayon-v\">acks</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">all_received</span><span class=\"crayon-sy\">?</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364c2527554078-4\">  <span class=\"crayon-e\">send</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">package</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364c2527554078-5\"><span class=\"crayon-st\">else</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364c2527554078-6\">  <span class=\"crayon-p\"># acumulate data</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364c2527554078-7\"><span class=\"crayon-st\">end</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>与此同时，诞生了另一个理论，延时 ACK</p>\n<p>在 TCP 通讯中，在发送数据后，需要接收回应包(ACK)来确认数据被成功传达。</p>\n<p>延时 ACK 旨在解决线路被大量的 ACK 包拥堵的状况。为了减少 ACK 包的数量，接收者等待需要回传的数据加上 ACK 包回传给发送方，如果没有数据需要回传，必须在至少每 2 个 MSS，或每 200 至 500 毫秒内发送 ACK（以防我们不再收到包）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc615364cd926879427\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nif packages.any?\r\n  send\r\nelsif last_ack_send_more_than_2MSS_ago? || 200_ms_timer.finished?\r\n  send\r\nelse\r\n  # wait\r\nend</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364cd926879427-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364cd926879427-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364cd926879427-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364cd926879427-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364cd926879427-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364cd926879427-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364cd926879427-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc615364cd926879427-1\"><span class=\"crayon-st\">if</span> <span class=\"crayon-v\">packages</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">any</span><span class=\"crayon-sy\">?</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364cd926879427-2\">  <span class=\"crayon-e\">send</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364cd926879427-3\"><span class=\"crayon-i\">elsif</span> <span class=\"crayon-v\">last_ack_send_more_than_2MSS_ago</span><span class=\"crayon-sy\">?</span> <span class=\"crayon-o\">||</span> <span class=\"crayon-cn\">200_ms_timer.finished</span><span class=\"crayon-sy\">?</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364cd926879427-4\">  <span class=\"crayon-e\">send</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364cd926879427-5\"><span class=\"crayon-st\">else</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364cd926879427-6\">  <span class=\"crayon-p\"># wait</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364cd926879427-7\"><span class=\"crayon-st\">end</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>正如你可能在一开始就注意到的那样 —— 这可能会导致在持久连接上的一些暂时的死锁。让我们重现它！</p>\n<p>假设：</p>\n<ul>\n<li>初始拥塞窗口等于 2。拥塞窗口是另一个 TCP 机制的一部分，称为慢启动。细节现在并不重要，只要记住它限制了一次可以发送多少个包。在第一次往返中，我们可以发送 2 个 MSS 包。在第二次发送中：4 个 MSS 包，第三次发送中：8 个MSS，依此类推。</li>\n<li>4 个已缓存的等待发送的数据包：A, B, C, D</li>\n<li>A, B, C是 MSS 包</li>\n<li>D 是一个小包</li>\n</ul>\n<p>场景：</p>\n<ul>\n<li>由于是初始的拥塞窗口，发送端被允许传送两个包：A 和 B</li>\n<li>接收端在成功获得这两个包之后，发送一个 ACK</li>\n<li>发件端发送 C 包。然而，Nagle 却阻止它发送 D 包（包长度太小，等待 C 的ACK）</li>\n<li>在接收端，延迟 ACK 使他无法发送 ACK（每隔 2 个包或每隔 200 毫秒发送一次）</li>\n<li>在 200ms 之后，接收器发送 C 包的 ACK</li>\n<li>发送端收到 ACK 并发送 D 包</li>\n</ul>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/01/b6e17719eb44c61d243ba5ca82c37480.png\"></p>\n<p>在这个数据交换过程中，由于 Nagel 和延迟 ACK 之间的死锁，引入了 200ms 的延迟。</p>\n<p>Nagle 算法是当时真正的救世主，而且目前仍然具有<a href=\"https://news.ycombinator.com/item?id=9048947\" rel=\"nofollow\">极大的价值</a>。但在大多数情况下，我们不会在我们的网站上使用它，因此可以通过添加 TCP_NODELAY 标志来安全地关闭它。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc615364d2974734920\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntcp_nodelay on;     # sets TCP_NODELAY flag, used on keep-alive connections</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364d2974734920-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc615364d2974734920-1\"><span class=\"crayon-v\">tcp</span><span class=\"crayon-sy\">_</span>nodelay <span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span>     <span class=\"crayon-p\"># sets TCP_NODELAY flag, used on keep-alive connections</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>享受这200ms提速吧！</p>\n<p>更多的细节，推荐阅读其他<a href=\"http://ccr.sigcomm.org/archive/2001/jan01/ccr-200101-mogul.pdf\" target=\"_blank\" rel=\"nofollow\">优秀的文章</a>。</p>\n<h3></h3>\n<h3><code>sendfile</code></h3>\n<p>正常来说，当要发送一个文件时需要下面的步骤：</p>\n<ul>\n<li>malloc(3) – 分配一个本地缓冲区，储存对象数据。</li>\n<li>read(2) – 检索和复制对象到本地缓冲区。</li>\n<li>write(2) – 从本地缓冲区复制对象到 socket 缓冲区。</li>\n</ul>\n<p>这涉及到两个上下文切换（读，写），并使相同对象的第二个副本成为不必要的。正如你所看到的，这不是最佳的方式。值得庆幸的是还有另一个系统调用，提升了发送文件（的效率），它被称为：<code>sendfile(2)</code>（想不到吧！居然是这名字）。这个调用在文件 cache 中检索一个对象，并传递指针（不需要复制整个对象），直接传递到 socket 描述符，Netflix 表示，使用 sendfile(2) 将网络吞吐量<a href=\"https://people.freebsd.org/~rrs/asiabsd_2015_tls.pdf\" target=\"_blank\" rel=\"nofollow\">从 6Gbps 提高到了 30Gbps</a>。</p>\n<p>然而，sendfile(2) 有一些注意事项：</p>\n<ul>\n<li>不可用于 UNIX sockets（例如：当通过你的上游服务器发送静态文件时）</li>\n<li>能否执行不同的操作，取决于操作系统（<a href=\"https://blog.phusion.nl/2015/06/04/the-brokenness-of-the-sendfile-system-call/\" target=\"_blank\" rel=\"nofollow\">这里查看更多</a>）</li>\n</ul>\n<p>在 nginx 中打开它</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc615364d6142358298\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsendfile on;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364d6142358298-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc615364d6142358298-1\"><span class=\"crayon-i\">sendfile</span> <span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h3><code>tcp_nopush</code></h3>\n<p>tcp_nopush 与 tcp_nodelay 相反。不是为了尽可能快地推送数据包，它的目标是一次性优化数据的发送量。</p>\n<p>在发送给客户端之前，它将强制等待包达到最大长度(MSS)。而且这个指令只有在 sendfile 开启时才起作用。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc615364dc024562146\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsendfile on;\r\ntcp_nopush on;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364dc024562146-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364dc024562146-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc615364dc024562146-1\"><span class=\"crayon-i\">sendfile</span> <span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364dc024562146-2\"><span class=\"crayon-v\">tcp</span><span class=\"crayon-sy\">_</span>nopush <span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>看起来 tcp_nopush 和 tcp_nodelay 是互斥的。但是，如果所有 3 个指令都开启了，nginx 会：</p>\n<ul>\n<li>确保数据包在发送给客户之前是已满的</li>\n<li>对于最后一个数据包，tcp_nopush 将被删除 —— 允许 TCP 立即发送，没有 200ms 的延迟</li>\n</ul>\n<h2>我应该使用多少进程？</h2>\n<h3>工作进程</h3>\n<p>worker_process 指令会指定：应该运行多少个 worker。默认情况下，此值设置为 1。最安全的设置是通过传递 auto 选项来使用核心数量。</p>\n<p>但由于 Nginx 的架构，其处理请求的速度非常快 – 我们可能一次不会使用超过 2-4 个进程（除非你正在托管 Facebook 或在 nginx 内部执行一些 CPU 密集型的任务）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc615364e0301644464\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nworker_process auto;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364e0301644464-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc615364e0301644464-1\"><span class=\"crayon-v\">worker</span><span class=\"crayon-sy\">_</span>process <span class=\"crayon-v\">auto</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3>worker 连接</h3>\n<p>与 worker_process 直接绑定的指令是 worker_connections。它指定一个工作进程可以一次打开多少个连接。这个数目包括所有连接（例如与代理服务器的连接），而不仅仅是与客户端的连接。此外，值得记住的是，一个客户端可以打开多个连接，同时获取其他资源。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc615364e4606014822\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nworker_connections 1024;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364e4606014822-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc615364e4606014822-1\"><span class=\"crayon-v\">worker</span><span class=\"crayon-sy\">_</span>connections <span class=\"crayon-cn\">1024</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3>打开文件数目限制</h3>\n<p>在基于 Unix 系统中的“一切都是文件”。这意味着文档、目录、管道甚至套接字都是文件。系统对一个进程可以打开多少文件有一个限制。要查看该限制：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc615364e7093873777\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nulimit -Sn      # soft limit\r\nulimit -Hn      # hard limit</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364e7093873777-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364e7093873777-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc615364e7093873777-1\"><span class=\"crayon-i\">ulimit</span> <span class=\"crayon-o\">-</span><span class=\"crayon-i\">Sn</span>      <span class=\"crayon-p\"># soft limit</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364e7093873777-2\"><span class=\"crayon-i\">ulimit</span> <span class=\"crayon-o\">-</span><span class=\"crayon-i\">Hn</span>      <span class=\"crayon-p\"># hard limit</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>这个系统限制必须根据 worker_connections 进行调整。任何传入的连接都会打开至少一个文件（通常是两个连接套接字以及后端连接套接字或磁盘上的静态文件）。所以这个值等于 worker_connections*2 是安全的。幸运的是，Nginx 提供了一个配置选项来增加这个系统的值。要使用这个配置，请添加具有适当数目的 worker_rlimit_nofile 指令并重新加载 nginx。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc615364ea456455592\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nworker_rlimit_nofile 2048;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364ea456455592-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc615364ea456455592-1\"><span class=\"crayon-v\">worker_rlimit</span><span class=\"crayon-sy\">_</span>nofile <span class=\"crayon-cn\">2048</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3>配置</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc615364ed539571701\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nworker_process auto;\r\nworker_rlimit_nofile 2048; # Changes the limit on the maximum number of open files (RLIMIT_NOFILE) for worker processes.\r\nworker_connections 1024;   # Sets the maximum number of simultaneous connections that can be opened by a worker process.</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364ed539571701-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364ed539571701-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364ed539571701-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc615364ed539571701-1\"><span class=\"crayon-v\">worker</span><span class=\"crayon-sy\">_</span>process <span class=\"crayon-v\">auto</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364ed539571701-2\"><span class=\"crayon-v\">worker_rlimit</span><span class=\"crayon-sy\">_</span>nofile <span class=\"crayon-cn\">2048</span><span class=\"crayon-sy\">;</span> <span class=\"crayon-p\"># Changes the limit on the maximum number of open files (RLIMIT_NOFILE) for worker processes.</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364ed539571701-3\"><span class=\"crayon-v\">worker</span><span class=\"crayon-sy\">_</span>connections <span class=\"crayon-cn\">1024</span><span class=\"crayon-sy\">;</span>   <span class=\"crayon-p\"># Sets the maximum number of simultaneous connections that can be opened by a worker process.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<h3>最大连接数</h3>\n<p>如上所述，我们可以计算一次可以处理多少个并发连接：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc615364f1796885576\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n最大连接数 = \r\n\r\n    worker_processes * worker_connections\r\n----------------------------------------------\r\n (keep_alive_timeout + avg_response_time) * 2</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364f1796885576-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364f1796885576-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364f1796885576-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364f1796885576-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364f1796885576-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc615364f1796885576-1\">最大连接数 <span class=\"crayon-o\">=</span> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364f1796885576-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a7cc615364f1796885576-3\">    <span class=\"crayon-v\">worker</span><span class=\"crayon-sy\">_</span>processes <span class=\"crayon-o\">*</span> <span class=\"crayon-v\">worker_connections</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364f1796885576-4\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364f1796885576-5\"> <span class=\"crayon-sy\">(</span><span class=\"crayon-v\">keep_alive</span><span class=\"crayon-sy\">_</span>timeout <span class=\"crayon-o\">+</span> <span class=\"crayon-v\">avg_response_time</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-o\">*</span> <span class=\"crayon-cn\">2</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>keep_alive_timeout (后续有更多介绍) + avg_response_time 告诉我们：单个连接持续了多久。我们也除以 2，通常情况下，你将有一个客户端打开 2 个连接的情况：一个在 nginx 和客户端之间，另一个在 nginx 和上游服务器之间。</p>\n<h2>Gzip</h2>\n<p>启用 gzip 可以显著降低响应的（报文）大小，因此，客户端（网页）会显得更快些。</p>\n<h3>压缩级别</h3>\n<p>Gzip 有不同的压缩级别，1 到 9 级。递增这个级别将会减少文件的大小，但也会增加资源消耗。作为标准我们将这个数字（级别）保持在 3 – 5 级，就像上面说的那样，它将会得到较小的节省，同时也会得到更大的 CPU 使用率。</p>\n<p>这有个通过 gzip 的不同的压缩级别压缩文件的例子，0 代表未压缩文件。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc615364f4347350799\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncurl -I -H 'Accept-Encoding: gzip,deflate' https://netguru.co/</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364f4347350799-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc615364f4347350799-1\"><span class=\"crayon-i\">curl</span> <span class=\"crayon-o\">-</span><span class=\"crayon-i\">I</span> <span class=\"crayon-o\">-</span><span class=\"crayon-i\">H</span> <span class=\"crayon-s\">'Accept-Encoding: gzip,deflate'</span> <span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//netguru.co/</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc615364f7600980596\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n❯ du -sh ./*\r\n 64K    ./0_gzip\r\n 16K    ./1_gzip\r\n 12K    ./2_gzip\r\n 12K    ./3_gzip\r\n 12K    ./4_gzip\r\n 12K    ./5_gzip\r\n 12K    ./6_gzip\r\n 12K    ./7_gzip\r\n 12K    ./8_gzip\r\n 12K    ./9_gzip</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364f7600980596-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364f7600980596-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364f7600980596-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364f7600980596-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364f7600980596-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364f7600980596-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364f7600980596-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364f7600980596-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364f7600980596-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364f7600980596-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364f7600980596-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc615364f7600980596-1\">❯ <span class=\"crayon-i\">du</span> <span class=\"crayon-o\">-</span><span class=\"crayon-i\">sh</span> <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364f7600980596-2\"> <span class=\"crayon-cn\">64K</span>    <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0_gzip</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364f7600980596-3\"> <span class=\"crayon-cn\">16K</span>    <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1_gzip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364f7600980596-4\"> <span class=\"crayon-cn\">12K</span>    <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2_gzip</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364f7600980596-5\"> <span class=\"crayon-cn\">12K</span>    <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">3_gzip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364f7600980596-6\"> <span class=\"crayon-cn\">12K</span>    <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">4_gzip</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364f7600980596-7\"> <span class=\"crayon-cn\">12K</span>    <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5_gzip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364f7600980596-8\"> <span class=\"crayon-cn\">12K</span>    <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">6_gzip</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364f7600980596-9\"> <span class=\"crayon-cn\">12K</span>    <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">7_gzip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364f7600980596-10\"> <span class=\"crayon-cn\">12K</span>    <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">8_gzip</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364f7600980596-11\"> <span class=\"crayon-cn\">12K</span>    <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">9_gzip</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc615364fa307318375\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n❯ ls -al\r\n-rw-r--r--   1 matDobek  staff  61711  3 Nov 08:46 0_gzip\r\n-rw-r--r--   1 matDobek  staff  12331  3 Nov 08:48 1_gzip\r\n-rw-r--r--   1 matDobek  staff  12123  3 Nov 08:48 2_gzip\r\n-rw-r--r--   1 matDobek  staff  12003  3 Nov 08:48 3_gzip\r\n-rw-r--r--   1 matDobek  staff  11264  3 Nov 08:49 4_gzip\r\n-rw-r--r--   1 matDobek  staff  11111  3 Nov 08:50 5_gzip\r\n-rw-r--r--   1 matDobek  staff  11097  3 Nov 08:50 6_gzip\r\n-rw-r--r--   1 matDobek  staff  11080  3 Nov 08:50 7_gzip\r\n-rw-r--r--   1 matDobek  staff  11071  3 Nov 08:51 8_gzip\r\n-rw-r--r--   1 matDobek  staff  11005  3 Nov 08:51 9_gzip</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364fa307318375-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364fa307318375-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364fa307318375-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364fa307318375-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364fa307318375-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364fa307318375-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364fa307318375-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364fa307318375-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364fa307318375-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364fa307318375-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364fa307318375-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc615364fa307318375-1\">❯ <span class=\"crayon-i\">ls</span> <span class=\"crayon-o\">-</span><span class=\"crayon-v\">al</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364fa307318375-2\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span>   <span class=\"crayon-cn\">1</span> <span class=\"crayon-i\">matDobek</span>  <span class=\"crayon-i\">staff</span>  <span class=\"crayon-cn\">61711</span>  <span class=\"crayon-cn\">3</span> <span class=\"crayon-i\">Nov</span> <span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">46</span> <span class=\"crayon-cn\">0_gzip</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364fa307318375-3\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span>   <span class=\"crayon-cn\">1</span> <span class=\"crayon-i\">matDobek</span>  <span class=\"crayon-i\">staff</span>  <span class=\"crayon-cn\">12331</span>  <span class=\"crayon-cn\">3</span> <span class=\"crayon-i\">Nov</span> <span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span> <span class=\"crayon-cn\">1_gzip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364fa307318375-4\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span>   <span class=\"crayon-cn\">1</span> <span class=\"crayon-i\">matDobek</span>  <span class=\"crayon-i\">staff</span>  <span class=\"crayon-cn\">12123</span>  <span class=\"crayon-cn\">3</span> <span class=\"crayon-i\">Nov</span> <span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span> <span class=\"crayon-cn\">2_gzip</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364fa307318375-5\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span>   <span class=\"crayon-cn\">1</span> <span class=\"crayon-i\">matDobek</span>  <span class=\"crayon-i\">staff</span>  <span class=\"crayon-cn\">12003</span>  <span class=\"crayon-cn\">3</span> <span class=\"crayon-i\">Nov</span> <span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span> <span class=\"crayon-cn\">3_gzip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364fa307318375-6\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span>   <span class=\"crayon-cn\">1</span> <span class=\"crayon-i\">matDobek</span>  <span class=\"crayon-i\">staff</span>  <span class=\"crayon-cn\">11264</span>  <span class=\"crayon-cn\">3</span> <span class=\"crayon-i\">Nov</span> <span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49</span> <span class=\"crayon-cn\">4_gzip</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364fa307318375-7\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span>   <span class=\"crayon-cn\">1</span> <span class=\"crayon-i\">matDobek</span>  <span class=\"crayon-i\">staff</span>  <span class=\"crayon-cn\">11111</span>  <span class=\"crayon-cn\">3</span> <span class=\"crayon-i\">Nov</span> <span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span> <span class=\"crayon-cn\">5_gzip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364fa307318375-8\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span>   <span class=\"crayon-cn\">1</span> <span class=\"crayon-i\">matDobek</span>  <span class=\"crayon-i\">staff</span>  <span class=\"crayon-cn\">11097</span>  <span class=\"crayon-cn\">3</span> <span class=\"crayon-i\">Nov</span> <span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span> <span class=\"crayon-cn\">6_gzip</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364fa307318375-9\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span>   <span class=\"crayon-cn\">1</span> <span class=\"crayon-i\">matDobek</span>  <span class=\"crayon-i\">staff</span>  <span class=\"crayon-cn\">11080</span>  <span class=\"crayon-cn\">3</span> <span class=\"crayon-i\">Nov</span> <span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span> <span class=\"crayon-cn\">7_gzip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364fa307318375-10\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span>   <span class=\"crayon-cn\">1</span> <span class=\"crayon-i\">matDobek</span>  <span class=\"crayon-i\">staff</span>  <span class=\"crayon-cn\">11071</span>  <span class=\"crayon-cn\">3</span> <span class=\"crayon-i\">Nov</span> <span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">51</span> <span class=\"crayon-cn\">8_gzip</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364fa307318375-11\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span>   <span class=\"crayon-cn\">1</span> <span class=\"crayon-i\">matDobek</span>  <span class=\"crayon-i\">staff</span>  <span class=\"crayon-cn\">11005</span>  <span class=\"crayon-cn\">3</span> <span class=\"crayon-i\">Nov</span> <span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">51</span> <span class=\"crayon-cn\">9_gzip</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0045 seconds] -->\r\n<p></p>\n<h3><code>gzip_http_version 1.1;</code></h3>\n<p>这条指令告诉 nginx 仅在 HTTP 1.1 以上的版本才能使用 gzip。我们在这里不涉及 HTTP 1.0，至于 HTTP 1.0 版本，它是不可能既使用 keep-alive 和 gzip 的。因此你必须做出决定：使用 HTTP 1.0 的客户端要么错过 gzip，要么错过 keep-alive。</p>\n<h3>配置</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc615364fe656228044\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngzip on;               # enable gzip\r\ngzip_http_version 1.1; # turn on gzip for http 1.1 and above\r\ngzip_disable \"msie6\";  # IE 6 had issues with gzip\r\ngzip_comp_level 5;     # inc compresion level, and CPU usage\r\ngzip_min_length 100;   # minimal weight to gzip file\r\ngzip_proxied any;      # enable gzip for proxied requests (e.g. CDN)\r\ngzip_buffers 16 8k;    # compression buffers (if we exceed this value, disk will be used instead of RAM)\r\ngzip_vary on;          # add header Vary Accept-Encoding (more on that in Caching section)\r\n\r\n# define files which should be compressed\r\ngzip_types text/plain;\r\ngzip_types text/css;\r\ngzip_types application/javascript;\r\ngzip_types application/json;\r\ngzip_types application/vnd.ms-fontobject;\r\ngzip_types application/x-font-ttf;\r\ngzip_types font/opentype;\r\ngzip_types image/svg+xml;\r\ngzip_types image/x-icon;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364fe656228044-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364fe656228044-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364fe656228044-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364fe656228044-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364fe656228044-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364fe656228044-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364fe656228044-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364fe656228044-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364fe656228044-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364fe656228044-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364fe656228044-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364fe656228044-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364fe656228044-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364fe656228044-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364fe656228044-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364fe656228044-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364fe656228044-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc615364fe656228044-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc615364fe656228044-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc615364fe656228044-1\"><span class=\"crayon-i\">gzip</span> <span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span>               <span class=\"crayon-p\"># enable gzip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364fe656228044-2\"><span class=\"crayon-v\">gzip_http</span><span class=\"crayon-sy\">_</span>version <span class=\"crayon-cn\">1.1</span><span class=\"crayon-sy\">;</span> <span class=\"crayon-p\"># turn on gzip for http 1.1 and above</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364fe656228044-3\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>disable <span class=\"crayon-s\">\"msie6\"</span><span class=\"crayon-sy\">;</span>  <span class=\"crayon-p\"># IE 6 had issues with gzip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364fe656228044-4\"><span class=\"crayon-v\">gzip_comp</span><span class=\"crayon-sy\">_</span>level <span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">;</span>     <span class=\"crayon-p\"># inc compresion level, and CPU usage</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364fe656228044-5\"><span class=\"crayon-v\">gzip_min</span><span class=\"crayon-sy\">_</span>length <span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">;</span>   <span class=\"crayon-p\"># minimal weight to gzip file</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364fe656228044-6\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>proxied <span class=\"crayon-v\">any</span><span class=\"crayon-sy\">;</span>      <span class=\"crayon-p\"># enable gzip for proxied requests (e.g. CDN)</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364fe656228044-7\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>buffers <span class=\"crayon-cn\">16</span> <span class=\"crayon-cn\">8k</span><span class=\"crayon-sy\">;</span>    <span class=\"crayon-p\"># compression buffers (if we exceed this value, disk will be used instead of RAM)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364fe656228044-8\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>vary <span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span>          <span class=\"crayon-p\"># add header Vary Accept-Encoding (more on that in Caching section)</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364fe656228044-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364fe656228044-10\"><span class=\"crayon-p\"># define files which should be compressed</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364fe656228044-11\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>types <span class=\"crayon-v\">text</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">plain</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364fe656228044-12\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>types <span class=\"crayon-v\">text</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">css</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364fe656228044-13\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>types <span class=\"crayon-v\">application</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">javascript</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364fe656228044-14\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>types <span class=\"crayon-v\">application</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">json</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364fe656228044-15\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>types <span class=\"crayon-v\">application</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">vnd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ms</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">fontobject</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364fe656228044-16\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>types <span class=\"crayon-v\">application</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">font</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ttf</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364fe656228044-17\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>types <span class=\"crayon-v\">font</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">opentype</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc615364fe656228044-18\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>types <span class=\"crayon-v\">image</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">svg</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">xml</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc615364fe656228044-19\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>types <span class=\"crayon-v\">image</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">icon</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0039 seconds] -->\r\n<p></p>\n<h1>缓存</h1>\n<p>缓存是另一回事，它能提升用户的请求速度。</p>\n<p>管理缓存可以仅由 2 个 header 控制：</p>\n<ul>\n<li>在 HTTP/1.1 中用 <code>Cache-Control</code> 管理缓存</li>\n<li>Pragma 对于 HTTP/1.0 客户端的向后兼容性</li>\n</ul>\n<p>缓存本身可以分为两类：公共缓存和私有缓存。公共缓存是被多个用户共同使用的。专用缓存专用于单个用户。我们可以很容易地区分，应该使用哪种缓存：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc61536502688747783\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nadd_header Cache-Control public;\r\nadd_header Pragma public;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc61536502688747783-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc61536502688747783-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc61536502688747783-1\"><span class=\"crayon-v\">add</span><span class=\"crayon-sy\">_</span>header <span class=\"crayon-v\">Cache</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Control</span> <span class=\"crayon-m\">public</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc61536502688747783-2\"><span class=\"crayon-v\">add</span><span class=\"crayon-sy\">_</span>header <span class=\"crayon-i\">Pragma</span> <span class=\"crayon-m\">public</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>对于标准资源，我们想保存1个月：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc61536505723289943\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlocation ~* \\.(jpg|jpeg|png|gif|ico|css|js)$ {\r\n  expires 1M;\r\n  add_header Cache-Control public;\r\n  add_header Pragma public;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc61536505723289943-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc61536505723289943-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc61536505723289943-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc61536505723289943-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc61536505723289943-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc61536505723289943-1\"><span class=\"crayon-i\">location</span> <span class=\"crayon-o\">~</span><span class=\"crayon-o\">*</span> <span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">jpg</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">jpeg</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">png</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">gif</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">ico</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">css</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">js</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">$</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc61536505723289943-2\">  <span class=\"crayon-i\">expires</span> <span class=\"crayon-cn\">1M</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc61536505723289943-3\">  <span class=\"crayon-v\">add</span><span class=\"crayon-sy\">_</span>header <span class=\"crayon-v\">Cache</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Control</span> <span class=\"crayon-m\">public</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc61536505723289943-4\">  <span class=\"crayon-v\">add</span><span class=\"crayon-sy\">_</span>header <span class=\"crayon-i\">Pragma</span> <span class=\"crayon-m\">public</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc61536505723289943-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>上面的配置似乎足够了。然而，使用公共缓存时有一个注意事项。</p>\n<p>让我们看看如果将我们的资源存储在公共缓存（如 CDN）中，URI 将是唯一的标识符。在这种情况下，我们认为 gzip 是开启的。</p>\n<p>有2个浏览器：</p>\n<ul>\n<li>旧的，不支持 gzip</li>\n<li>新的，支持 gzip</li>\n</ul>\n<p>旧的浏览器给 CDN 发送了一个 netguru.co/style 请求。但是 CDN 也没有这个资源，它将会给我们的服务器发送请求，并且返回未经压缩的响应。CDN 在哈希里存储文件（为以后使用）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc61536509068849821\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\r\n  ...\r\n  netguru.co/styles.css =&gt; FILE(\"/sites/netguru/style.css\")\r\n  ...\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc61536509068849821-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc61536509068849821-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc61536509068849821-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc61536509068849821-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc61536509068849821-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc61536509068849821-1\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc61536509068849821-2\">  <span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc61536509068849821-3\">  <span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">styles</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">css</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-e\">FILE</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"/sites/netguru/style.css\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc61536509068849821-4\">  <span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc61536509068849821-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>然后将其返回给客户端。</p>\n<p>现在，新的浏览器发送相同的请求到 CDN，请求 netguru.co/style.css，获取 gzip 打包的资源。由于 CDN 仅通过 URI 标识资源，它将为新浏览器返回一样的未压缩资源。新的浏览器将尝试提取未打包的文件，但是将获得无用的东西。</p>\n<p>如果我们能够告诉公共缓存是怎样进行 URI 和编码的资源识别，我们就可以避免这个问题。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc6153650c339674162\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\r\n  ...\r\n  (netguru.co/styles.css, gzip) =&gt; FILE(\"/sites/netguru/style.css.gzip\")\r\n  (netguru.co/styles.css, text/css) =&gt; FILE(\"/sites/netguru/style.css\")\r\n  ...\r\n}\r\n``</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc6153650c339674162-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc6153650c339674162-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc6153650c339674162-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc6153650c339674162-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc6153650c339674162-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc6153650c339674162-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc6153650c339674162-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc6153650c339674162-1\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc6153650c339674162-2\">  <span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc6153650c339674162-3\">  <span class=\"crayon-sy\">(</span><span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">styles</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">css</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-e\">FILE</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"/sites/netguru/style.css.gzip\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc6153650c339674162-4\">  <span class=\"crayon-sy\">(</span><span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">styles</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">css</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-v\">text</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">css</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-e\">FILE</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"/sites/netguru/style.css\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc6153650c339674162-5\">  <span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc6153650c339674162-6\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc6153650c339674162-7\"><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">`</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>这正是 Vary Accept-Encoding: 完成的。它告诉公共缓存，可以通过 URI 和 Accept-Encoding header 区分资源。</p>\n<p>所以我们的最终配置如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc6153650f558983778\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlocation ~* \\.(jpg|jpeg|png|gif|ico|css|js)$ {\r\n  expires 1M;\r\n  add_header Cache-Control public;\r\n  add_header Pragma public;\r\n  add_header Vary Accept-Encoding;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc6153650f558983778-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc6153650f558983778-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc6153650f558983778-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc6153650f558983778-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc6153650f558983778-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc6153650f558983778-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc6153650f558983778-1\"><span class=\"crayon-i\">location</span> <span class=\"crayon-o\">~</span><span class=\"crayon-o\">*</span> <span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">jpg</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">jpeg</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">png</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">gif</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">ico</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">css</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">js</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">$</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc6153650f558983778-2\">  <span class=\"crayon-i\">expires</span> <span class=\"crayon-cn\">1M</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc6153650f558983778-3\">  <span class=\"crayon-v\">add</span><span class=\"crayon-sy\">_</span>header <span class=\"crayon-v\">Cache</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Control</span> <span class=\"crayon-m\">public</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc6153650f558983778-4\">  <span class=\"crayon-v\">add</span><span class=\"crayon-sy\">_</span>header <span class=\"crayon-i\">Pragma</span> <span class=\"crayon-m\">public</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc6153650f558983778-5\">  <span class=\"crayon-v\">add</span><span class=\"crayon-sy\">_</span>header <span class=\"crayon-i\">Vary</span> <span class=\"crayon-v\">Accept</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Encoding</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc6153650f558983778-6\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p></p>\n<h2>超时</h2>\n<p>client_body_timeout 和 client_header_timeout 定义了 nginx 在抛出 408（请求超时）错误之前应该等待客户端传输主体或头信息的时间。</p>\n<p>send_timeout 设置向客户端发送响应的超时时间。超时仅在两次连续的写入操作之间被设置，而不是用于整个响应的传输过程。如果客户端在给定时间内没有收到任何内容，则连接将被关闭。</p>\n<p>设置这些值时要小心，因为等待时间过长会使你容易受到攻击者的攻击，并且等待时间太短的话会切断与速度较慢的客户端的连接。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc61536513869333408\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# Configure timeouts\r\nclient_body_timeout   12;\r\nclient_header_timeout 12;\r\nsend_timeout          10;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc61536513869333408-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc61536513869333408-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc61536513869333408-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc61536513869333408-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc61536513869333408-1\"><span class=\"crayon-p\"># Configure timeouts</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc61536513869333408-2\"><span class=\"crayon-v\">client_body</span><span class=\"crayon-sy\">_</span>timeout   <span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc61536513869333408-3\"><span class=\"crayon-v\">client_header</span><span class=\"crayon-sy\">_</span>timeout <span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc61536513869333408-4\"><span class=\"crayon-v\">send</span><span class=\"crayon-sy\">_</span>timeout          <span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<h2>Buffers</h2>\n<h3><code>client_body_buffer_size</code></h3>\n<p>设置读取客户端请求正文的缓冲区大小。如果请求主体大于缓冲区，则整个主体或仅其部分被写入临时文件。对 client_body_buffer_size 而言，设置 16k 大小在大多数情况下是足够的。</p>\n<p>这是又一个可以产生巨大影响的设置，必须谨慎使用。太小了，则 nginx 会不断地使用 I/O 把剩余的部分写入文件。太大了，则当攻击者可以打开所有连接但你无法在系统上分配足够缓冲来处理这些连接时，你可能容易受到 DOS 攻击。</p>\n<h3></h3>\n<h3><code>client_header_buffer_size</code> 和 <code>large_client_header_buffers</code></h3>\n<p>如果 header 不能跟 client_header_buffer_size 匹配上，就会使用 large_client_header_buffers。如果请求也不适合 large_client_header_buffers，将给客户端返回一个错误提示。对于大多数的请求来说，1KB 的缓存是足够的。但是，如果一个包含大量记录的请求，1KB 是不够的。</p>\n<p>如果请求行的长度超限，将给客户端返回一个 414（请求的 URI 太长）错误提示。如果请求的 header 长度超限，将抛出一个 400（错误请求）的错误代码</p>\n<h3><code>client_max_body_size</code></h3>\n<p>设置客户端请求主体的最大允许范围，在请求头字段中指定“内容长度”。如果您希望允许用户上传文件，调整此配置以满足您的需要。</p>\n<h3>配置</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc61536517157705547\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclient_body_buffer_size       16K;\r\nclient_header_buffer_size     1k;\r\nlarge_client_header_buffers   2 1k;\r\nclient_max_body_size          8m;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc61536517157705547-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc61536517157705547-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc61536517157705547-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc61536517157705547-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc61536517157705547-1\"><span class=\"crayon-v\">client_body_buffer</span><span class=\"crayon-sy\">_</span>size       <span class=\"crayon-cn\">16K</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc61536517157705547-2\"><span class=\"crayon-v\">client_header_buffer</span><span class=\"crayon-sy\">_</span>size     <span class=\"crayon-cn\">1k</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc61536517157705547-3\"><span class=\"crayon-v\">large_client_header</span><span class=\"crayon-sy\">_</span>buffers   <span class=\"crayon-cn\">2</span> <span class=\"crayon-cn\">1k</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc61536517157705547-4\"><span class=\"crayon-v\">client_max_body</span><span class=\"crayon-sy\">_</span>size          <span class=\"crayon-cn\">8m</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<h2>Keep-Alive</h2>\n<p>HTTP 所依赖的 TCP 协议需要执行三次握手来启动连接。这意味着在服务器可发送数据（例如图像）之前，需要在客户机和服务器之间进行三次完整的往返。</p>\n<p>假设你从 Warsaw 请求的 /image.jpg，并连接到在柏林最近的服务器：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc6153651a839525736\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nOpen connection\r\n\r\nTCP Handshake:\r\nWarsaw  -&gt;------------------ synchronize packet (SYN) -----------------&gt;- Berlin\r\nWarsaw  -&lt;--------- synchronise-acknowledgement packet (SYN-ACK) ------&lt;- Berlin\r\nWarsaw  -&gt;------------------- acknowledgement (ACK) -------------------&gt;- Berlin\r\n\r\nData transfer:\r\nWarsaw  -&gt;---------------------- /image.jpg ---------------------------&gt;- Berlin\r\nWarsaw  -&lt;--------------------- (image data) --------------------------&lt;- Berlin\r\n\r\nClose connection</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc6153651a839525736-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc6153651a839525736-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc6153651a839525736-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc6153651a839525736-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc6153651a839525736-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc6153651a839525736-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc6153651a839525736-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc6153651a839525736-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc6153651a839525736-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc6153651a839525736-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc6153651a839525736-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc6153651a839525736-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc6153651a839525736-1\"><span class=\"crayon-e\">Open </span><span class=\"crayon-e\">connection</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc6153651a839525736-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a7cc6153651a839525736-3\"><span class=\"crayon-e\">TCP </span><span class=\"crayon-v\">Handshake</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc6153651a839525736-4\"><span class=\"crayon-v\">Warsaw</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">synchronize </span><span class=\"crayon-e\">packet</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SYN</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Berlin</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc6153651a839525736-5\"><span class=\"crayon-v\">Warsaw</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">synchronise</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">acknowledgement </span><span class=\"crayon-e\">packet</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SYN</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ACK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Berlin</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc6153651a839525736-6\"><span class=\"crayon-v\">Warsaw</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">acknowledgement</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ACK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Berlin</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc6153651a839525736-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc6153651a839525736-8\"><span class=\"crayon-e\">Data </span><span class=\"crayon-v\">transfer</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc6153651a839525736-9\"><span class=\"crayon-v\">Warsaw</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">image</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">jpg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Berlin</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc6153651a839525736-10\"><span class=\"crayon-v\">Warsaw</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">image </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Berlin</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc6153651a839525736-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc6153651a839525736-12\"><span class=\"crayon-e\">Close </span><span class=\"crayon-v\">connection</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0035 seconds] -->\r\n<p>对于另一次请求，你将不得不再次执行整个初始化。如果你在短时间内发送多次请求，这可能会快速累积起来。这样的话 keep-alive 使用起来就方便了。在成功响应之后，它保持连接空闲给定的时间段（例如 10 秒）。如果在这段时间内有另一个请求，现有的连接将被重用，空闲时间将被刷新。</p>\n<p>Nginx 提供了几个指令来调整 keepalive 设置。这些可以分为两类：</p>\n<ul>\n<li>在客户端和 nginx 之间 keep-alive</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc6153651e170132864\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nkeepalive_disable msie6;        # disable selected browsers.\r\n\r\n# The number of requests a client can make over a single keepalive connection. The default is 100, but a much higher value can be especially useful for testing with a load‑generation tool, which generally sends a large number of requests from a single client.\r\nkeepalive_requests 100000;\r\n\r\n# How long an idle keepalive connection remains open.\r\nkeepalive_timeout 60;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc6153651e170132864-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc6153651e170132864-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc6153651e170132864-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc6153651e170132864-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc6153651e170132864-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc6153651e170132864-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc6153651e170132864-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc6153651e170132864-1\"><span class=\"crayon-v\">keepalive</span><span class=\"crayon-sy\">_</span>disable <span class=\"crayon-v\">msie6</span><span class=\"crayon-sy\">;</span>        <span class=\"crayon-p\"># disable selected browsers.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc6153651e170132864-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a7cc6153651e170132864-3\"><span class=\"crayon-p\"># The number of requests a client can make over a single keepalive connection. The default is 100, but a much higher value can be especially useful for testing with a load‑generation tool, which generally sends a large number of requests from a single client.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc6153651e170132864-4\"><span class=\"crayon-v\">keepalive</span><span class=\"crayon-sy\">_</span>requests <span class=\"crayon-cn\">100000</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc6153651e170132864-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc6153651e170132864-6\"><span class=\"crayon-p\"># How long an idle keepalive connection remains open.</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc6153651e170132864-7\"><span class=\"crayon-v\">keepalive</span><span class=\"crayon-sy\">_</span>timeout <span class=\"crayon-cn\">60</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<ul>\n<li>在 nginx 和上游服务器之间 keep-alive</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a7cc61536521131485070\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nupstream backend {\r\n    # The number of idle keepalive connections to an upstream server that remain open for each worker process\r\n    keepalive 16;\r\n}\r\n\r\nserver {\r\n  location /http/ {\r\n    proxy_pass http://http_backend;\r\n    proxy_http_version 1.1;\r\n    proxy_set_header Connection \"\";\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a7cc61536521131485070-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc61536521131485070-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc61536521131485070-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc61536521131485070-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc61536521131485070-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc61536521131485070-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc61536521131485070-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc61536521131485070-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc61536521131485070-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc61536521131485070-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a7cc61536521131485070-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a7cc61536521131485070-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a7cc61536521131485070-1\"><span class=\"crayon-e\">upstream</span> <span class=\"crayon-e\">backend</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc61536521131485070-2\">    <span class=\"crayon-p\"># The number of idle keepalive connections to an upstream server that remain open for each worker process</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc61536521131485070-3\">    <span class=\"crayon-i\">keepalive</span> <span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc61536521131485070-4\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc61536521131485070-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc61536521131485070-6\"><span class=\"crayon-e\">server</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc61536521131485070-7\">  <span class=\"crayon-e\">location</span> <span class=\"crayon-o\">/</span><span class=\"crayon-e\">http</span><span class=\"crayon-o\">/</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc61536521131485070-8\">    <span class=\"crayon-v\">proxy</span><span class=\"crayon-sy\">_</span>pass <span class=\"crayon-v\">http</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//http_backend;</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc61536521131485070-9\">    <span class=\"crayon-v\">proxy_http</span><span class=\"crayon-sy\">_</span>version <span class=\"crayon-cn\">1.1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc61536521131485070-10\">    <span class=\"crayon-v\">proxy_set</span><span class=\"crayon-sy\">_</span>header <span class=\"crayon-i\">Connection</span> <span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a7cc61536521131485070-11\">  <span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a7cc61536521131485070-12\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>就这些了。</p>\n<h2>总结</h2>\n<p>感谢您的阅读。如果没有大量的资源，这个系列是不可能完成的。在这一系列的写作中，我们发现了一些特别有用的网站：</p>\n<ul>\n<li><a href=\"https://nginx.org/en/docs/\" target=\"_blank\" rel=\"nofollow\">nginx 文档</a></li>\n<li><a href=\"https://www.nginx.com/blog/\" target=\"_blank\" rel=\"nofollow\">nginx 博客</a></li>\n<li><a href=\"https://www.udemy.com/nginx-fundamentals/\" target=\"_blank\" rel=\"nofollow\">udemy（在线教育网站 ）的 nginx 原理</a></li>\n<li><a href=\"https://www.igvita.com/\" target=\"_blank\" rel=\"nofollow\">Ilya Grigorik 的博客</a>，和他的令人惊奇的书：<a href=\"https://hpbn.co/\" target=\"_blank\" rel=\"nofollow\">《高性能浏览器网络》</a></li>\n<li><a href=\"https://blog.martinfjordvald.com/\" target=\"_blank\" rel=\"nofollow\">Martin Fjordvald 的博客</a></li>\n</ul>\n<p>我们会很感激你的反馈和评价，请随意讨论。你喜欢这系列吗？你有什么关于下一步应该解决什么问题的建议吗？或你发现了一个错误？告诉我们，下期再见。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113572\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113572votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113572\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 6 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "url_object_id": "a30dd57d9dcf828544d8fc52dbaabef1", "front_image_path": "full/2d4fd40c8eaec8319c1de2f154b3275aecd23f9d.jpg"}
{"title": "免费知识哪里来？Arxiv 使用指南", "url": "http://blog.jobbole.com/113524/", "fron_image_url": ["http://insights.thoughtworks.cn/wp-content/uploads/2018/01/500350520-1024x576.jpg"], "praise_nums": "2", "comment_nums": 0, "fav_nums": "5", "tags": "其他,Arxiv", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><div>\n<p>如果你非常确定自己想要找什么，比如知道论文的名字（算法的名字）或者作者的名字，直接去Google Scholar上搜索是最快的。然而如果你并不是很确定自己想要什么，只是想要看看某个领域的最新发展，知道大家都在干什么，然而却发现Google Scholar给你的结果多半不靠谱，请读下去。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/500350520.jpg\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/500350520-1024x576.jpg\" alt=\"\" width=\"700\" height=\"394\"></a></p>\n<h3>引子</h3>\n<p>最近半年，在我身上时常发生下面这类对话：</p>\n<blockquote><p>“Hey， 你知道XXXXXXXXXXXXX问题怎么解决吗？”</p>\n<p>“哦，我刚好读过两篇相关的论文，等下发给你。”</p>\n<p>……</p></blockquote>\n<p>尴尬的沉默，一般来说拿到文章之后对方就再也不会来找我了，虽然我是真心的想要交流，然而有一些好学的孩子会接着问：</p>\n<blockquote><p>“你的论文是哪里找到的呢？”</p></blockquote>\n<p>鉴于论文背景不同，我会丢一个链接过去——这个链接（网站）在大部分数学/物理/计算机/统计领域里面，都是<a href=\"https://arxiv.org/\">https://arxiv.org/</a>。</p>\n<h3>Arxiv是什么</h3>\n<p>arxiv设计的初衷是一群物理学家们想要交流自己将要发表的论文，可以想象一下，在上世纪九十年代，人们用的还是软盘（包括5.25吋软盘和3.5寸什么的，存储空间可以说以KB计算），邮箱也不例外，投稿高峰期分分钟几百个KB的邮箱就会被文章塞满。Paul Ginsparg一看这不行，论文如果想要很好的被分享并审核，大约是需要集中存储的，就在1991年于LANL（<a href=\"http://www.lanl.gov/\">http://www.lanl.gov/ </a>洛斯阿拉莫斯国家实验室）建立了arxiv的雏形，如下图所示。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/1-Arxiv.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/1-Arxiv.png\" alt=\"\" width=\"941\" height=\"504\"></a></p>\n<p>当时有个萌萌的域名：<a href=\"http://xxx.lanl.gov/\">http://xxx.lanl.gov/</a> ，到现在也可以被访问。不过由于LANL作为一个严谨的科学实验室实在是懒得运营这个网站，后来就被康奈尔大学接管支持。</p>\n<p>然而，今天当我们谈到arxiv，就不能不说Open Access【开放获取】。 我们都知道，以前看文章是要钱的，直到今天，看大部分的文章也是要钱的。如下图所示，看一篇Nature一般要20美元，折合100多人民币。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/2-Open-Access.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/2-Open-Access.png\" alt=\"\" width=\"941\" height=\"727\"></a></p>\n<p>这个价格吧，说贵不贵说便宜不便宜，在大部分有钱公司和牛逼学校买个site license或者报个销都是不成问题的，但是对那些有科研兴趣的个人或者是那些落后地区的学校，就很成问题了。像马拉维啊中非啊这种国家，到2016年，官方数据中人均GDP才400美刀（大约20篇文章），你让人家怎么玩嘛。难道要让知识像财富一样集中在少数人手里么？</p>\n<p>就好像我们一直希望互联网拥有中立性（电信运营商、有线电视公司等互联网服务提供商应当平等地对待所有通过他们网络的流量，网络服务提供商有区别地对待不同的流量可能会使大公司能够限制消费者的自由）一样，我们并不希望因为钱而阻挡了知识的传播。 所以，我们有了<a href=\"http://www.budapestopenaccessinitiative.org/read\">布达佩斯宣言</a>:</p>\n<blockquote><p>There are many degrees and kinds of wider and easier access to this literature. By ‘open access’ to this literature, we mean its free availability on the public internet, permitting any users to read, download, copy, distribute, print, search, or link to the full texts of these articles, crawl them for indexing, pass them as data to software, or use them for any other lawful purpose, without financial, legal, or technical barriers other than those inseparable from gaining access to the internet itself. The only constraint on reproduction and distribution, and the only role for copyright in this domain, should be to give authors control over the integrity of their work and the right to be properly acknowledged and cited.</p></blockquote>\n<p>作为开放获取的先驱者，我们要为arxiv——这一开放获取的先驱鼓掌！为我们带来的好处就是，免费！免费！免费！</p>\n<p>基于我的个人访问经验，大家如果想知道都有哪些杂志或者期刊提供免费的资源，可以参考这个列表：<a href=\"https://en.wikipedia.org/wiki/List_of_open_access_journals\">https://en.wikipedia.org/wiki/List_of_open_access_journals</a> 图中是“数学”类目下提供开放获取的期刊。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/3-mathematics.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/3-mathematics.png\" alt=\"\" width=\"941\" height=\"602\"></a></p>\n<p><strong>实在找不到免费文章咋办？</strong></p>\n<p>我一般会直接发邮件问作者要，顺便聊聊自己的研究领域以及跟这篇文章相关的几个最新问题，成功率还是蛮高的，还可能交到好朋友。</p>\n<p>说到Arxiv还有一样不能不说的就是LaTex——个人认为最美的文本编辑器（或者语言？），只是从学术圈儿跳出来之后发现大家好像都懒得用，在此由于篇幅所限，不再赘述。</p>\n<h3>Arxiv有什么</h3>\n<p>由于各种历史原因，Arxiv中文献的主要研究领域还是数理哲学，包括数学/物理/计算机/统计/天文/定量生物/定量金融等领域。截止到2016年的发表量统计可以参考下面这张图。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/4-Arxiv.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/4-Arxiv.png\" alt=\"\" width=\"941\" height=\"481\"></a></p>\n<p>左图中是每年新提交的文章数目，右图是每年的发表量所占百分比（总和为1）， “hep-“代表高能物理学，(hep-th+hep-ph+hep-lat+hep-ex), “cond-mat” 代表凝聚态物理学, “astro-ph” = 天体物理学, “math” 代表数学, “other physics” 表示物理学的其他领域（ physics+nucl+gr-qc+quant-ph+nlin） “biology” 指的是量化生物学，“finance” 指的是量化金融，“cs”指的是计算机科学。</p>\n<p>我们可以看到，在2002年之前，计算机科学领域的占比几乎可以忽略不计，然而到2016年已然占据了近五分之一，并且还在以极快的速度增长。而1992至1996年间占据了大半江山的高能物理学，到了今天地盘几乎被蚕食殆尽，只剩约10%的份额苟延残喘。沧海桑田，可见一斑。</p>\n<p>还有论文发表总量如下图：</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/5-Arxiv.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/5-Arxiv.png\" alt=\"\" width=\"941\" height=\"427\"></a></p>\n<p>（信息来自：<a href=\"https://arxiv.org/help/stats/2016_by_area/index\">https://arxiv.org/help/stats/2016_by_area/index</a> ）</p>\n<p>从图中，我们可以清楚的发现三个事情：</p>\n<ol>\n<li>所有论文发表量都在时间轴上爆发式的增长，在上面这张历史发表总量图中体现的尤为明显；</li>\n<li>数学一家独大，不管是在年度发表量还是历史发表总量上；</li>\n<li>计算机（cs）在历史发表总量中只占了8.3%，然而2016年的提交量占了18.3%，结合提交数量图的分析，真是长势喜人、值得期待。</li>\n<li>每个月近10000篇文章提交（正式接受的会少一些，如果精准到感兴趣的垂直领域会更少）。</li>\n</ol>\n<p>那么，不想只关心数理领域的咋办？</p>\n<p>很简单，就好像任何市场一样，arxiv火了之后大批人跟风，所以我们现在有了生物学版本arxiv <a href=\"https://www.biorxiv.org/\">https://www.biorxiv.org/</a>，心理学版本arxiv <a href=\"https://psyarxiv.com/\">https://psyarxiv.com/</a> ，等等等等。当然，知识的沉淀往往需要时间，这些垂直领域的“arxiv”们到目前为止还不是非常成熟，所以我仍然建议大家结合上文提到的Open Access列表里的机构，去寻找想要的免费资源。</p>\n<h3>Arxiv怎么用</h3>\n<p>就像我在本文开头提到的那样，这个引擎最大的效果是当你并不确定自己想要什么的时候，去看看领域的最新发展，知道大家都在干什么。它最大的好处是值得信任。 当然，同样值得信任的还有很多——虽然它们大部分都要钱，针对大多数期刊们，可以按照影响因子从大往小排个序（众所周知，影响因子这个评定标准就像高考成绩一样非常片面，然而这也是目前最普遍的解决方案了），前文中提到的Nature系列和Science系列，都非常值得信任。不做赘言。</p>\n<p>很高兴的一点是，收费（还收的比较贵的）基本都是期刊，然而与其他领域尤其是生物学方向不太一样，计算机方向最顶级的往往是会议而不是期刊，而会议往往是不收费的！这里举个例子，International Conference on Machine Learning 【ICML】，机器学习方面的顶级会议之一，其中所有的文章都可以在下面的链接里找到。<a href=\"https://icml.cc/Conferences/2017/Schedule?type=Poster\">https://icml.cc/Conferences/2017/Schedule?type=Poster</a></p>\n<p>太幸福了！——这个也是我最最最推荐大家找到值得读的文章的办法：盯着领域著名会议列表刷（虽然有个缺点，就是刷到啥算啥）。</p>\n<p>但是，往往新入门的人往往没有办法靠关键字搜索【看脸】来分辨哪个期刊哪个会议才是真正有价值的。每年的会议不知凡几，我在wikiCFP上随便搜了一下人工智能，在接下来一年内仅仅这个垂直领域就有3130个会议。平心而论，有多少是真正有价值的呢？每个会议按照50篇paper来算，15万篇paper，一个人类就是不吃不睡不工作全职看一年paper，能看几篇？</p>\n<p>当然，据个人经验，关于计算机方向的会议排名，大家可以参考下面的链接 <a href=\"https://www.aminer.cn/ranks/conf\">https://www.aminer.cn/ranks/conf</a> ，我截取了AI/PR (人工智能/模式识别）领域排名靠前的一段，如下图。有想看计算机视觉的可以参考里面带”vision”的，具体会议的分析和比较将另文分析，这里不做赘言。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/6.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/6.png\" alt=\"\" width=\"941\" height=\"546\"></a></p>\n<p>但是，如果不想这样盯着列表一个一个会议慢慢看下来呢？如果就是想要找一下某个主题或者关键字呢？或者就是想要知道这个月出现了什么新算法呢？——会议可都是一年一次的。 这个时候，就是arxiv大放异彩的时候了。它给了我们一个更集中的搜索平台，而且相对来说更值得信任（反正比起来什么都可以搜索的Google Scholar，用户要筛选的噪声少了很多）。</p>\n<p>没有证据都是耍流氓？ 请点开下面这个链接 <a href=\"https://arxiv.org/list/cs.LG/recent\">https://arxiv.org/list/cs.LG/recent</a>，这是对Machine Learning领域的一个搜索。仅仅看这一页简介那些熟悉的作者名字，就知道大部分都不会让你失望的。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/7.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/7.png\" alt=\"\" width=\"941\" height=\"519\"></a></p>\n<p>尽管arxiv定位是preprint，但其中也囊括了各种已经被NIPS，AAAI等等行业顶级会议接受的文章。而且，所有这些，都有直接的pdf原文可以免费下载。搜索和筛选成本都低到极致。同时，只需要点击感兴趣的作者名字，所有他发表过的文章都会被列出来（如下图中的Lei Shu），而完全不用担心其他搜索引擎中常常发生的同名同姓作者的麻烦——这一点相信搜索过中文名拼音的都深有体会——张王李赵遍天下绝对不是说说的。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/8.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/8.png\" alt=\"\" width=\"941\" height=\"585\"></a></p>\n<p>得数据库如此，夫复何求？</p>\n<p>作为对比，下面是我在Google Scholar同样搜索Machine Learning关键字得到的结果。大家可以自行体会时效性，相关度和质量。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/9.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/9.png\" alt=\"\" width=\"941\" height=\"385\"></a></p>\n<p>当然，时效性这个可以通过点击左手边的“Sort by date”来解决，然而点击了之后是这个样子的：</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/10.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/10.png\" alt=\"\" width=\"941\" height=\"515\"></a></p>\n<p>——反正前面Springer家的都是要钱的，质量不提，单单是能下载的pdf也真的不常有。</p>\n<p>更重要的是，google作为跨平台老牌全网搜索引擎，看到某个关键字的时候并不会针对特殊的领域进行搜索，所以大批量主题无关的文章（不信的可以搜一下lenet，vgg这类，看看搜索结果），就会干扰搜索结果。</p>\n<p>所以，当你要找的参考文献属于数理领域尤其是AI/ML/Stat相关，而Google Scholar又没能给你满意的结果（又或者很贵），就试试看arxiv吧！</p>\n<div></div>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113524\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113524votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113524\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">\r\n\t\t\t<img src=\"http://tp3.sinaimg.cn/1774908135/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            ThoughtWorks是一家全球IT咨询公司，追求卓越软件质量，致力于科技驱动商业变革。擅长构建定制化软件产品，帮助客户快速将概念转化为价值。同时为客户提供用户体验设计、技术战略咨询、组织转型等咨询服务。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/thoughtworkschina\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/thoughtworkschina/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 80</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://insights.thoughtworkers.org/\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/thoughtworkschina\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "url_object_id": "4e5a1f0a9df35564532b911089a9915e", "front_image_path": "full/b6904127059aff354b12d2cb953eb7733f8d9064.jpg"}
